{{ define "title" }} Kilonova {{ end }}
{{ define "content" }}

<div class="segment-panel">
    <h1>Kilonova {{version}}</h1>
    
    <p class="text-gray-600 dark:text-gray-300 mb-2">{{ getText "announcement" `<a target="_blank" rel="noopener noreferrer" href="https://discord.gg/Qa6Ytgh">Discord</a>` }} </p>
</div>

{{ $user := .Ctx.User.Brief }}

{{ $showAllContests := false }}

{{ if (or .RunningContests .FutureContests)}}
<div class="segment-panel">
    {{ $bothContests := and .RunningContests .FutureContests }}
    <div class="grid grid-cols-1 md:grid-cols-2">
        {{ with .RunningContests }}
        <div class="col-span-1 {{ if not $bothContests }} col-span-full {{ else }} contest-small-grid {{ end }}">
            <h2>{{getText "running_contests"}}</h2>
            {{ template "contest_list.html" . }}
        </div>
        {{ end }}
        {{ with .FutureContests }}
        <div class="col-span-1 {{ if not $bothContests }} col-span-full {{ else }} contest-small-grid {{ end }}">
            <h2>{{getText "future_contests"}}</h2>
            {{ template "contest_list.html" . }}
        </div>
        {{ end }}
    </div>
    <div class="mt-3">
        {{ renderMarkdown (getText "all_contests_announcement") }}
    </div>
</div>
{{ end }}



{{ if frontPagePbs }}

<div class="segment-panel">
    <h2>{{getText "problems"}}</h2>
    
    <div class="list-group mb-4">
        {{ range problemLists }}
            {{ range .SubLists }}
                {{ with problemList .ID }}
                    {{template "problemlist_show" (genPblistParams authedUser . false)}}
                {{ end }}
            {{ end }}
        {{ end }}
        {{ with (unassociatedProblems authedUser) }}
            <details class="list-group-head">
                <summary class="pb-1 mt-1">
                    <span>{{getText "the_rest"}}</span>
                    {{if $user}}
                        <span class="float-right badge">
                            {{ getText "num_solved" (numSolvedPbs .) (len .) }}
                        </span>
                    {{else}}
                    <span class="float-right badge">
                        {{ if eq 1 (len .)}}
                            {{ getText "single_problem" }}
                        {{ else }}
                            {{ getText "num_problems" (len .) }}
                        {{ end }}
                    </span>
                    {{end}}
                </summary>
                {{ with . }}
                    <div class="mt-2">
                        {{ template "pb_list_group" (genProblemsParams . true false true) }}
                    </div>
                {{ end }}
            </details>
        {{ end }}
    </div>
    
    <div class="mb-4">
        {{ renderMarkdown (getText "all_problems_announcement") }}
    </div>
</div>


{{ end }}

{{end}}
