{{ define "title" }} {{getText .Ctx.Language "lists"}} {{ end }}
{{ define "content" }}

{{ $root := . }}
{{ $user := .Ctx.User.Brief }}
{{ $ctx := .Ctx }}

{{ if $user }}
{{ if $user.Proposer }}
<a class="mb-2" href="/problem_lists/create">{{getText $root.Ctx.Language "create"}}</a>
{{ end }}
{{ end }}

<div class="list-group list-group-mini">
{{ range problemLists }}
    {{template "problemlist_show" (genPblistParams $user $ctx . false)}}
{{ end }}
{{ with (unassociatedProblems $user) }}
    <details class="list-group-head">
        <summary class="pb-1 mt-1">
            <span class="float-left">{{getText $ctx.Language "the_rest"}}</span>
            {{if $user}}
                <span class="float-right badge">
                    {{ getText $ctx.Language "num_solved" (numSolvedPbs $user .) (len .) }}
                </span>
            {{end}}
        </summary>
        {{ with . }}
            <div class="mt-2">
                {{ template "pb_list_group" (genProblemsParams $user $root.Ctx.Language . true) }}
            </div>
        {{ end }}
    </details>
{{ end }}
</div>


{{ end }}
