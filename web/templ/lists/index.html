{{ define "title" }} {{getText .Ctx.Language "lists"}} {{ end }}
{{ define "content" }}

{{ $root := . }}
{{ $user := .Ctx.User }}
{{ $ctx := .Ctx }}

{{ if $user }}
<a class="mb-2" href="/problem_lists/create">{{getText $root.Ctx.Language "create"}}</a>
{{ end }}

{{ range problemLists }}
	<div class="segment-container">
		<span class="flex justify-between">
			<h1 class="inline"><a href="/problem_lists/{{.ID}}">#{{.ID}}</a> {{.Title}}</h1>
			<span>{{if $user}} {{ getText $ctx.Language "num_solved" (numSolved $user .List) (len .List) }}{{end}}</span>
		</span>
		{{ if .Description }}<h2>{{renderMarkdown .Description}}</h2>{{end}}
		{{ with (listProblems $user .) }}
			{{ template "pb_list_group" (genPbListParams $user $root.Ctx.Language .) }}
		{{ else }}
			<p> {{ getText $ctx.Language "noListProblems" }} </p>
		{{ end }}
	</div>
{{ else }}
	<p> {{getText $root.Ctx.Language "noProblemLists"}} </p>
{{ end }}

{{ end }}
