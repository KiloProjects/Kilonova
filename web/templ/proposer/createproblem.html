<div id="problem_create" class="segment-container">
<h2>{{getText "createPb"}}</h2>
<form id="problem_create_form">
	<label class="block mb-2">
		<span class="form-label">{{getText "problemName"}}</span>
		<input type="text" class="form-input w-full" placeholder="Nume..." id="pbname" name="pbname" required>
	</label>
	<div class="block mb-3">
		<label class="inline-flex items-center text-lg">
			<input class="form-checkbox" type="checkbox" id="cInputSwitch">
			<span class="ml-2">{{getText "consoleInput"}}</span>
		</label>
	</div>
	<button class="btn btn-blue mb-2">{{getText "button.create"}}</button>
    <div class="reset-list segment-container">
        <h2> Modificări recente în urma introducerii problemelor interactive: </h2>
        <ul>
            <li>Tipul problemei este dedus automat. Prezența unui fișier care începe cu <code>checker</code> și are o extensie validă va duce la utilizarea lui automată ca și checker-ul problemei, nu mai este necesar să specifici expicit (chiar am șters setarea din panoul de editare fiindcă nu mai este utilă);</li>
            <li>Alte fișiere cu extensie validă sau cu <code>.h</code> vor fi incluse și compilate atunci când este evaluată o submisie;</li>
            <li>De menționat că la problemele interactive sunt suportate numai submisii în C++;</li>
            <li>Dacă vreți să atașați un fișier de cod problemei (alte fișiere precum imagini sunt ignorate oricum), însă nu vreți să îl includeți la compilare, acesta trebuie prefixat cu <code>_</code>.</li>
        </ul>
    </div>
</form>

<script>
	async function createProblem(e) {
		e.preventDefault();
		let name = document.getElementById("pbname").value;
		let cInput = document.getElementById("cInputSwitch").checked;
		let res = await bundled.postCall('/problem/create', {title: name, consoleInput: cInput})
		if(res.status == "error") {
			bundled.apiToast(res)
			return
		}
		window.location.assign(`/problems/${res.data}`)
	}
	document.getElementById("problem_create_form").addEventListener("submit", createProblem)
</script>
</div>
